<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Wave-Connect - Modern P2P video & audio calls with real-time audio visualization"
    />
    <meta name="author" content="Santosh Maurya" />
    <title>Wave-Connect - P2P Video & Audio Calls</title>
    <link rel="icon" type="image/png" href="/logo.png" />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      :root {
        --bg-primary: #ffffff;
        --bg-secondary: #f5f5f5;
        --glass-bg: rgba(255, 255, 255, 0.75);
        --glass-border: rgba(0, 0, 0, 0.1);
        --text-primary: #000000;
        --text-secondary: #666666;
        --accent: #000000;
        --accent-hover: #333333;
        --shadow: 0 8px 32px rgba(0, 0, 0, 0.08);
        --shadow-lg: 0 16px 48px rgba(0, 0, 0, 0.12);
        --success: #25d366;
        --danger: #dc3545;
        --warning: #ffc107;
        --control-bg: rgba(255, 255, 255, 0.9);
        --control-hover: rgba(0, 0, 0, 0.05);
      }

      [data-theme="dark"] {
        --bg-primary: #0a0a0a;
        --bg-secondary: #1a1a1a;
        --glass-bg: rgba(26, 26, 26, 0.75);
        --glass-border: rgba(255, 255, 255, 0.1);
        --text-primary: #ffffff;
        --text-secondary: #c0c0c0;
        --accent: #c0c0c0;
        --accent-hover: #e0e0e0;
        --shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
        --shadow-lg: 0 16px 48px rgba(0, 0, 0, 0.7);
        --control-bg: rgba(40, 40, 40, 0.9);
        --control-hover: rgba(255, 255, 255, 0.1);
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          Oxygen, Ubuntu, Cantarell, sans-serif;
        background: var(--bg-primary);
        color: var(--text-primary);
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 16px;
        transition: background 0.3s ease, color 0.3s ease;
        position: relative;
        overflow: hidden;
        margin: 0;
      }

      body::before {
        content: "";
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: radial-gradient(
            circle at 20% 50%,
            rgba(0, 0, 0, 0.03) 0%,
            transparent 50%
          ),
          radial-gradient(
            circle at 80% 80%,
            rgba(0, 0, 0, 0.03) 0%,
            transparent 50%
          );
        pointer-events: none;
        z-index: 0;
      }

      [data-theme="dark"] body::before {
        background: radial-gradient(
            circle at 20% 50%,
            rgba(192, 192, 192, 0.05) 0%,
            transparent 50%
          ),
          radial-gradient(
            circle at 80% 80%,
            rgba(192, 192, 192, 0.05) 0%,
            transparent 50%
          );
      }

      .app-container {
        width: 100%;
        max-width: 1400px;
        position: relative;
        z-index: 1;
        padding: 0 16px;
        box-sizing: border-box;
      }

      .theme-toggle {
        position: fixed;
        top: 20px;
        right: 20px;
        width: 48px;
        height: 48px;
        border-radius: 50%;
        background: var(--glass-bg);
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        border: 1px solid var(--glass-border);
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        box-shadow: var(--shadow);
        transition: all 0.3s ease;
        z-index: 1000;
      }

      .theme-toggle:hover {
        transform: scale(1.1);
        box-shadow: var(--shadow-lg);
      }

      .theme-toggle svg {
        width: 24px;
        height: 24px;
        fill: var(--text-primary);
      }

      /* GitHub Support Button */
      .github-btn {
        position: fixed;
        bottom: 20px;
        left: 20px;
        padding: 10px 18px;
        background: var(--glass-bg);
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        border: 1px solid var(--glass-border);
        border-radius: 12px;
        display: flex;
        align-items: center;
        gap: 8px;
        cursor: pointer;
        box-shadow: var(--shadow);
        transition: all 0.3s ease;
        z-index: 1000;
        text-decoration: none;
        color: var(--text-primary);
        font-size: 14px;
        font-weight: 500;
      }

      /* Hide GitHub button when in call */
      .github-btn.hidden {
        opacity: 0;
        pointer-events: none;
        transform: translateY(20px);
      }

      .github-btn:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-lg);
        background: var(--control-hover);
      }

      .github-btn svg {
        width: 20px;
        height: 20px;
        fill: var(--text-primary);
      }

      .github-btn .star {
        color: #ffc107;
      }

      /* Logo Styling */
      .app-logo {
        width: 80px;
        height: 80px;
        margin: 0 auto 16px;
        display: block;
        object-fit: contain;
        filter: drop-shadow(0 4px 12px rgba(0, 0, 0, 0.1));
      }

      [data-theme="dark"] .app-logo {
        filter: drop-shadow(0 4px 12px rgba(255, 255, 255, 0.1));
      }

      .welcome-screen {
        background: var(--glass-bg);
        backdrop-filter: blur(40px);
        -webkit-backdrop-filter: blur(40px);
        border-radius: 24px;
        border: 1px solid var(--glass-border);
        padding: 32px;
        box-shadow: var(--shadow-lg);
        text-align: center;
        max-width: 460px;
        width: 100%;
        margin: 0 auto;
        animation: fadeIn 0.5s ease;
        box-sizing: border-box;
        max-height: 100vh;
        display: flex;
        flex-direction: column;
        justify-content: center;
      }

      .welcome-screen::-webkit-scrollbar {
        display: none;
      }

      .welcome-screen {
        -ms-overflow-style: none;
        scrollbar-width: none;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .app-title {
        font-size: 26px;
        font-weight: 600;
        margin-bottom: 6px;
        color: var(--text-primary);
      }

      .app-subtitle {
        font-size: 13px;
        color: var(--text-secondary);
        margin-bottom: 24px;
      }

      .input-group {
        margin-bottom: 12px;
      }

      .input-field {
        width: 100%;
        padding: 12px 16px;
        font-size: 15px;
        background: var(--control-bg);
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        border: 1px solid var(--glass-border);
        border-radius: 12px;
        color: var(--text-primary);
        transition: all 0.3s ease;
        outline: none;
        box-sizing: border-box;
      }

      .input-field:focus {
        border-color: var(--accent);
        box-shadow: 0 0 0 3px rgba(0, 0, 0, 0.05);
      }

      [data-theme="dark"] .input-field:focus {
        box-shadow: 0 0 0 3px rgba(192, 192, 192, 0.1);
      }

      .input-field::placeholder {
        color: var(--text-secondary);
      }

      .button-group {
        display: flex;
        gap: 10px;
        margin-top: 16px;
        width: 100%;
      }

      .btn {
        flex: 1;
        padding: 12px 20px;
        font-size: 15px;
        font-weight: 600;
        border: none;
        border-radius: 12px;
        cursor: pointer;
        transition: all 0.3s ease;
        outline: none;
        position: relative;
        overflow: hidden;
        box-sizing: border-box;
      }

      .btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }

      .btn-primary {
        background: var(--accent);
        color: var(--bg-primary);
        box-shadow: var(--shadow);
      }

      .btn-primary:hover:not(:disabled) {
        background: var(--accent-hover);
        transform: translateY(-2px);
        box-shadow: var(--shadow-lg);
      }

      .btn-secondary {
        background: var(--control-bg);
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        color: var(--text-primary);
        border: 1px solid var(--glass-border);
      }

      .btn-secondary:hover:not(:disabled) {
        background: var(--control-hover);
        transform: translateY(-2px);
      }

      .room-code-display {
        margin: 16px 0;
        padding: 14px;
        background: var(--control-bg);
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        border-radius: 12px;
        border: 1px solid var(--glass-border);
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 10px;
        width: 100%;
        box-sizing: border-box;
      }

      .room-code-label {
        font-size: 11px;
        color: var(--text-secondary);
        margin-bottom: 3px;
      }

      .room-code-value {
        font-family: "Courier New", monospace;
        font-size: 18px;
        font-weight: 600;
        letter-spacing: 2px;
        color: var(--text-primary);
      }

      .copy-btn {
        padding: 8px 14px;
        background: var(--accent);
        color: var(--bg-primary);
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-size: 13px;
        font-weight: 600;
        transition: all 0.3s ease;
        white-space: nowrap;
      }

      .copy-btn:hover {
        transform: scale(1.05);
      }

      .copy-btn.copied {
        background: var(--success);
      }

      .call-type-selection {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 10px;
        margin-top: 16px;
        width: 100%;
      }

      .call-type-btn {
        padding: 16px 12px;
        background: var(--control-bg);
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        border: 1px solid var(--glass-border);
        border-radius: 12px;
        cursor: pointer;
        transition: all 0.3s ease;
        text-align: center;
      }

      .call-type-btn:hover {
        background: var(--control-hover);
        transform: translateY(-3px);
        box-shadow: var(--shadow-lg);
      }

      .call-type-btn svg {
        width: 28px;
        height: 28px;
        margin-bottom: 6px;
        fill: var(--text-primary);
      }

      .call-type-btn span {
        display: block;
        font-size: 13px;
        font-weight: 600;
        color: var(--text-primary);
      }

      .call-screen {
        display: none;
        width: 100%;
        height: 100vh;
        height: 100dvh; /* Dynamic viewport height for mobile */
        position: fixed;
        top: 0;
        left: 0;
        background: var(--bg-primary);
        z-index: 100;
        overflow: hidden;
      }

      .call-screen.active {
        display: flex;
        flex-direction: column;
      }

      .call-header {
        padding: 20px;
        background: var(--glass-bg);
        backdrop-filter: blur(40px);
        -webkit-backdrop-filter: blur(40px);
        border-bottom: 1px solid var(--glass-border);
        display: flex;
        align-items: center;
        justify-content: space-between;
        flex-shrink: 0;
      }

      .call-info {
        display: flex;
        align-items: center;
        gap: 12px;
      }

      .call-avatar {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: var(--accent);
        color: var(--bg-primary);
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 600;
        font-size: 16px;
        position: relative;
        transition: all 0.3s ease;
      }

      /* Audio visualizer pulse ring */
      .call-avatar::before {
        content: "";
        position: absolute;
        top: -6px;
        left: -6px;
        right: -6px;
        bottom: -6px;
        border-radius: 50%;
        border: 2px solid var(--accent);
        opacity: 0;
        transform: scale(1);
        transition: opacity 0.3s ease;
      }

      .call-avatar.speaking::before {
        animation: pulse-ring 1.5s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        opacity: 1;
      }

      @keyframes pulse-ring {
        0%,
        100% {
          transform: scale(1);
          opacity: 0.8;
        }
        50% {
          transform: scale(1.3);
          opacity: 0;
        }
      }

      .call-user-info h3 {
        font-size: 16px;
        font-weight: 600;
        margin-bottom: 2px;
      }

      .call-status {
        font-size: 13px;
        color: var(--text-secondary);
      }

      .video-container {
        flex: 1;
        position: relative;
        display: flex;
        align-items: center;
        justify-content: center;
        background: var(--bg-secondary);
        overflow: hidden;
        width: 100%;
        height: 100%;
      }

      .remote-video {
        width: 100%;
        height: 100%;
        object-fit: contain;
        background: #000;
      }

      .remote-video.camera-feed {
        transform: scaleX(-1);
      }

      .local-video-wrapper {
        position: absolute;
        top: 20px;
        right: 20px;
        width: 180px;
        height: 240px;
        border-radius: 16px;
        overflow: visible;
        box-shadow: var(--shadow-lg);
        border: 2px solid var(--glass-border);
        background: var(--bg-secondary);
        z-index: 10;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .local-video-wrapper::before {
        content: "";
        position: absolute;
        top: -3px;
        left: -3px;
        right: -3px;
        bottom: -3px;
        border-radius: 18px;
        border: 3px solid var(--accent);
        opacity: 0;
        z-index: -1;
        box-shadow: 0 0 20px var(--accent);
        transition: opacity 0.3s ease;
      }

      .local-video-wrapper.speaking::before {
        animation: glow-pulse 1.5s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        opacity: 1;
      }

      @keyframes glow-pulse {
        0%,
        100% {
          opacity: 0.6;
          filter: blur(8px);
        }
        50% {
          opacity: 1;
          filter: blur(12px);
        }
      }

      .local-video {
        width: 100%;
        height: 100%;
        object-fit: cover;
        background: #000;
        border-radius: 14px;
      }

      .local-video.camera-feed {
        transform: scaleX(-1);
      }

      .local-video-label {
        position: absolute;
        bottom: 8px;
        left: 8px;
        padding: 4px 8px;
        background: rgba(0, 0, 0, 0.6);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        color: white;
        font-size: 12px;
        border-radius: 6px;
        font-weight: 500;
        z-index: 5;
      }

      /* Audio visualizer container */
      .audio-visualizer {
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        height: 60px;
        display: flex;
        align-items: flex-end;
        justify-content: center;
        gap: 3px;
        padding: 0 8px;
        pointer-events: none;
        z-index: 3;
        background: linear-gradient(to top, rgba(0, 0, 0, 0.4), transparent);
        backdrop-filter: blur(8px);
        -webkit-backdrop-filter: blur(8px);
        border-radius: 0 0 14px 14px;
      }

      .audio-bar {
        width: 4px;
        min-height: 4px;
        background: var(--accent);
        border-radius: 2px;
        transition: height 0.1s ease-out;
        opacity: 0.7;
        box-shadow: 0 0 4px var(--accent);
      }

      [data-theme="dark"] .audio-bar {
        background: var(--accent);
        box-shadow: 0 0 8px rgba(192, 192, 192, 0.6);
        opacity: 0.85;
      }

      /* Center visualizer for audio-only calls */
      .center-audio-visualizer {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 300px;
        height: 200px;
        display: none;
        align-items: flex-end;
        justify-content: center;
        gap: 6px;
        padding: 30px;
        background: var(--glass-bg);
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        border-radius: 24px;
        border: 1px solid var(--glass-border);
        box-shadow: var(--shadow-lg);
      }

      .center-audio-visualizer.active {
        display: flex;
      }

      .center-audio-bar {
        width: 8px;
        min-height: 8px;
        background: var(--accent);
        border-radius: 4px;
        transition: height 0.1s ease-out;
        opacity: 0.8;
        box-shadow: 0 0 8px var(--accent);
      }

      [data-theme="dark"] .center-audio-bar {
        background: linear-gradient(to top, #c0c0c0, #ffffff);
        box-shadow: 0 0 12px rgba(192, 192, 192, 0.8);
        opacity: 0.9;
      }

      /* Mini EQ bars beside avatar */
      .avatar-eq {
        display: flex;
        align-items: flex-end;
        gap: 2px;
        height: 24px;
        margin-left: 8px;
        opacity: 0;
        transition: opacity 0.3s ease;
      }

      .avatar-eq.active {
        opacity: 1;
      }

      .avatar-eq-bar {
        width: 3px;
        min-height: 3px;
        background: var(--accent);
        border-radius: 1.5px;
        transition: height 0.1s ease-out;
      }

      .call-controls {
        padding: 24px;
        background: var(--glass-bg);
        backdrop-filter: blur(40px);
        -webkit-backdrop-filter: blur(40px);
        border-top: 1px solid var(--glass-border);
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 16px;
        flex-shrink: 0;
        flex-wrap: wrap;
      }

      .control-btn {
        width: 56px;
        height: 56px;
        border-radius: 50%;
        border: none;
        background: var(--control-bg);
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s ease;
        box-shadow: var(--shadow);
      }

      .control-btn:hover {
        transform: scale(1.1);
        box-shadow: var(--shadow-lg);
      }

      .control-btn svg {
        width: 24px;
        height: 24px;
        fill: var(--text-primary);
      }

      .control-btn.danger {
        background: var(--danger);
      }

      .control-btn.danger svg {
        fill: white;
      }

      .control-btn.active {
        background: var(--accent);
      }

      .control-btn.active svg {
        fill: var(--bg-primary);
      }

      .status-message {
        padding: 10px 14px;
        background: var(--glass-bg);
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        border-radius: 10px;
        border: 1px solid var(--glass-border);
        margin-top: 14px;
        text-align: center;
        font-size: 13px;
        color: var(--text-secondary);
      }

      .hidden {
        display: none !important;
      }

      /* Responsive Design */
      @media (max-width: 768px) {
        body {
          padding: 8px;
        }

        .app-container {
          padding: 0;
        }

        .welcome-screen {
          padding: 20px 18px;
          border-radius: 18px;
          max-height: 100vh;
        }

        .app-title {
          font-size: 22px;
          margin-bottom: 4px;
        }

        .app-subtitle {
          font-size: 12px;
          margin-bottom: 18px;
        }

        .input-group {
          margin-bottom: 10px;
        }

        .input-field {
          padding: 11px 14px;
          font-size: 14px;
        }

        .button-group {
          flex-direction: column;
          margin-top: 12px;
          gap: 8px;
        }

        .btn {
          width: 100%;
          padding: 11px 18px;
          font-size: 14px;
        }

        .room-code-display {
          padding: 12px;
          margin: 12px 0;
        }

        .room-code-value {
          font-size: 16px;
        }

        .copy-btn {
          padding: 7px 12px;
          font-size: 12px;
        }

        .call-type-selection {
          grid-template-columns: repeat(3, 1fr);
          gap: 8px;
          margin-top: 12px;
        }

        .call-type-btn {
          padding: 12px 6px;
        }

        .call-type-btn svg {
          width: 22px;
          height: 22px;
          margin-bottom: 4px;
        }

        .call-type-btn span {
          font-size: 11px;
        }

        .status-message {
          padding: 8px 12px;
          font-size: 12px;
          margin-top: 12px;
        }

        .local-video-wrapper {
          width: 120px;
          height: 160px;
          top: 80px;
          right: 16px;
        }

        .remote-video,
        .local-video {
          object-fit: contain;
        }

        .call-controls {
          padding: 16px;
          gap: 12px;
        }

        .control-btn {
          width: 48px;
          height: 48px;
        }

        .control-btn svg {
          width: 20px;
          height: 20px;
        }

        .theme-toggle {
          top: 16px;
          right: 16px;
          width: 40px;
          height: 40px;
        }

        .github-btn {
          bottom: 16px;
          left: 16px;
          padding: 8px 12px;
          font-size: 12px;
          gap: 6px;
        }

        .github-btn svg {
          width: 16px;
          height: 16px;
        }

        .app-logo {
          width: 60px;
          height: 60px;
          margin-bottom: 12px;
        }

        .call-header {
          padding: 16px;
        }

        .call-avatar {
          width: 36px;
          height: 36px;
          font-size: 14px;
        }

        .call-user-info h3 {
          font-size: 14px;
        }

        .call-status {
          font-size: 12px;
        }
      }

      @media (max-width: 480px) {
        .app-title {
          font-size: 20px;
        }

        .app-subtitle {
          font-size: 11px;
          margin-bottom: 16px;
        }

        .welcome-screen {
          padding: 18px 16px;
        }

        .input-field {
          padding: 10px 12px;
          font-size: 14px;
        }

        .btn {
          padding: 10px 16px;
          font-size: 14px;
        }

        .room-code-display {
          flex-direction: column;
          align-items: stretch;
          padding: 12px;
        }

        .room-code-text {
          text-align: center;
        }

        .room-code-value {
          font-size: 15px;
        }

        .copy-btn {
          width: 100%;
          padding: 8px;
        }

        .call-type-selection {
          grid-template-columns: repeat(3, 1fr);
          gap: 6px;
        }

        .call-type-btn {
          padding: 10px 4px;
        }

        .call-type-btn svg {
          width: 20px;
          height: 20px;
          margin-bottom: 3px;
        }

        .call-type-btn span {
          font-size: 10px;
        }

        .local-video-wrapper {
          width: 100px;
          height: 133px;
          top: 70px;
          right: 12px;
        }

        .call-controls {
          padding: 12px 8px;
          gap: 8px;
        }

        .control-btn {
          width: 44px;
          height: 44px;
        }
      }

      @media (min-width: 1024px) {
        .local-video-wrapper {
          width: 240px;
          height: 320px;
        }
      }
    </style>
  </head>
  <body data-theme="light">
    <!-- GitHub Support Button -->
    <a
      href="https://github.com/Blaxez"
      target="_blank"
      rel="noopener noreferrer"
      class="github-btn"
      id="github-btn"
      title="Star & Support on GitHub"
    >
      <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path
          d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0 0 24 12c0-6.63-5.37-12-12-12z"
        />
      </svg>
      <span class="star">‚≠ê</span>
      <span>Star & Support</span>
    </a>

    <button class="theme-toggle" id="theme-toggle" aria-label="Toggle theme">
      <svg id="theme-icon-sun" viewBox="0 0 24 24">
        <circle cx="12" cy="12" r="5" />
        <line x1="12" y1="1" x2="12" y2="3" />
        <line x1="12" y1="21" x2="12" y2="23" />
        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64" />
        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78" />
        <line x1="1" y1="12" x2="3" y2="12" />
        <line x1="21" y1="12" x2="23" y2="12" />
        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36" />
        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22" />
      </svg>
      <svg id="theme-icon-moon" class="hidden" viewBox="0 0 24 24">
        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" />
      </svg>
    </button>

    <div class="app-container">
      <div class="welcome-screen" id="welcome-screen">
        <img src="/logo.png" alt="Wave-Connect Logo" class="app-logo" />
        <h1 class="app-title">Wave-Connect</h1>
        <p class="app-subtitle">Connect with anyone, anywhere</p>

        <div class="input-group">
          <input
            type="text"
            id="username-input"
            class="input-field"
            placeholder="Enter your name"
            maxlength="20"
          />
        </div>

        <div class="input-group">
          <input
            type="text"
            id="room-input"
            class="input-field"
            placeholder="Enter room code"
          />
        </div>

        <div class="button-group">
          <button class="btn btn-secondary" id="join-room-btn">
            Join Room
          </button>
          <button class="btn btn-primary" id="create-room-btn">
            Create Room
          </button>
        </div>

        <div class="room-code-display hidden" id="room-code-display">
          <div class="room-code-text">
            <div class="room-code-label">Your Room Code</div>
            <div class="room-code-value" id="room-code"></div>
          </div>
          <button class="copy-btn" id="copy-room-btn">Copy</button>
        </div>

        <div class="call-type-selection hidden" id="call-type-selection">
          <button class="call-type-btn" id="voice-call-btn">
            <svg viewBox="0 0 24 24">
              <path
                d="M20.01 15.38c-1.23 0-2.42-.2-3.53-.56a.977.977 0 0 0-1.01.24l-1.57 1.97c-2.83-1.35-5.48-3.9-6.89-6.83l1.95-1.66c.27-.28.35-.67.24-1.02-.37-1.11-.56-2.3-.56-3.53 0-.54-.45-.99-.99-.99H4.19C3.65 3 3 3.24 3 3.99 3 13.28 10.73 21 20.01 21c.71 0 .99-.63.99-1.18v-3.45c0-.54-.45-.99-.99-.99z"
              />
            </svg>
            <span>Voice Call</span>
          </button>
          <button class="call-type-btn" id="video-call-btn">
            <svg viewBox="0 0 24 24">
              <path
                d="M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z"
              />
            </svg>
            <span>Video Call</span>
          </button>
          <button class="call-type-btn" id="more-options-btn">
            <svg viewBox="0 0 24 24">
              <circle cx="12" cy="5" r="2" />
              <circle cx="12" cy="12" r="2" />
              <circle cx="12" cy="19" r="2" />
            </svg>
            <span>More Options</span>
          </button>
        </div>

        <div class="status-message" id="status-message">
          Please create or join a room to start
        </div>
      </div>

      <div class="call-screen" id="call-screen">
        <div class="call-header">
          <div class="call-info">
            <div class="call-avatar" id="peer-avatar">P</div>
            <div class="avatar-eq" id="peer-eq">
              <div class="avatar-eq-bar"></div>
              <div class="avatar-eq-bar"></div>
              <div class="avatar-eq-bar"></div>
              <div class="avatar-eq-bar"></div>
              <div class="avatar-eq-bar"></div>
            </div>
            <div class="call-user-info">
              <h3 id="peer-name">Connecting...</h3>
              <div class="call-status" id="call-status">Calling...</div>
            </div>
          </div>
        </div>

        <div class="video-container">
          <video
            id="remote-video"
            class="remote-video camera-feed"
            autoplay
            playsinline
          ></video>

          <!-- Center visualizer for audio-only calls -->
          <div class="center-audio-visualizer" id="center-visualizer">
            <div class="center-audio-bar"></div>
            <div class="center-audio-bar"></div>
            <div class="center-audio-bar"></div>
            <div class="center-audio-bar"></div>
            <div class="center-audio-bar"></div>
            <div class="center-audio-bar"></div>
            <div class="center-audio-bar"></div>
            <div class="center-audio-bar"></div>
            <div class="center-audio-bar"></div>
            <div class="center-audio-bar"></div>
            <div class="center-audio-bar"></div>
            <div class="center-audio-bar"></div>
          </div>

          <div class="local-video-wrapper" id="local-video-wrapper">
            <video
              id="local-video"
              class="local-video camera-feed"
              autoplay
              playsinline
              muted
            ></video>

            <div class="local-video-label" id="local-name">You</div>
          </div>
        </div>

        <div class="call-controls">
          <button
            class="control-btn"
            id="toggle-mic-btn"
            title="Mute microphone"
          >
            <svg id="mic-on-icon" viewBox="0 0 24 24">
              <path
                d="M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z"
              />
            </svg>
            <svg id="mic-off-icon" class="hidden" viewBox="0 0 24 24">
              <path
                d="M19 11h-1.7c0 .74-.16 1.43-.43 2.05l1.23 1.23c.56-.98.9-2.09.9-3.28zm-4.02.17c0-.06.02-.11.02-.17V5c0-1.66-1.34-3-3-3S9 3.34 9 5v.18l5.98 5.99zM4.27 3L3 4.27l6.01 6.01V11c0 1.66 1.33 3 2.99 3 .22 0 .44-.03.65-.08l1.66 1.66c-.71.33-1.5.52-2.31.52-2.76 0-5.3-2.1-5.3-5.1H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c.91-.13 1.77-.45 2.54-.9L19.73 21 21 19.73 4.27 3z"
              />
            </svg>
          </button>

          <button
            class="control-btn"
            id="toggle-camera-btn"
            title="Turn off camera"
          >
            <svg id="camera-on-icon" viewBox="0 0 24 24">
              <path
                d="M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z"
              />
            </svg>
            <svg id="camera-off-icon" class="hidden" viewBox="0 0 24 24">
              <path
                d="M21 6.5l-4 4V7c0-.55-.45-1-1-1H9L7.17 4H4c-1.1 0-2 .9-2 2v10c0 .55.45 1 1 1h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-5 11.5V13H9v2.5L5.5 12 9 8.5V11h6V8.5l3.5 3.5-3.5 3.5z"
              />
            </svg>
          </button>

          <button
            class="control-btn hidden"
            id="switch-camera-btn"
            title="Switch camera"
          >
            <svg viewBox="0 0 24 24">
              <path
                d="M20 4h-3.17L15 2H9L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-5 11.5V13H9v2.5H8.5L12 16l3.5-3.5H13z"
              />
            </svg>
          </button>

          <button
            class="control-btn"
            id="share-screen-btn"
            title="Share screen"
          >
            <svg viewBox="0 0 24 24">
              <path
                d="M20 18c1.1 0 1.99-.9 1.99-2L22 6c0-1.11-.9-2-2-2H4c-1.11 0-2 .89-2 2v10c0 1.1.89 2 2 2H0v2h24v-2h-4zM4 6h16v10H4V6zm9 6.5V10h-2v2.5H8.5L12 16l3.5-3.5H13z"
              />
            </svg>
          </button>

          <button
            class="control-btn hidden"
            id="stop-share-screen-btn"
            title="Stop sharing"
          >
            <svg viewBox="0 0 24 24">
              <path
                d="M21.22 18.02l2 2H24v-2h-2.78zm.77-2L22 15.99V6c0-1.11-.9-2-2-2H7.99l5.76 5.76-4.42 4.42 1.41 1.41 4.42-4.42L22 18.01zM2.39 1.73L1.11 3l1.54 1.54c-.4.36-.65.89-.65 1.48v10c0 1.1.89 2 2 2H0v2h18.13l2.71 2.71 1.27-1.27L2.39 1.73zM7 15.5V13h1.13l1.5 1.5H7z"
              />
            </svg>
          </button>

          <button class="control-btn danger" id="end-call-btn" title="End call">
            <svg viewBox="0 0 24 24">
              <path
                d="M12 9c-1.6 0-3.15.25-4.6.72v3.1c0 .39-.23.74-.56.9-.98.49-1.87 1.12-2.66 1.85-.18.18-.43.28-.7.28-.28 0-.53-.11-.71-.29L.29 13.08c-.18-.17-.29-.42-.29-.7 0-.28.11-.53.29-.71C3.34 8.78 7.46 7 12 7s8.66 1.78 11.71 4.67c.18.18.29.43.29.71 0 .28-.11.53-.29.71l-2.48 2.48c-.18.18-.43.29-.71.29-.27 0-.52-.11-.7-.28-.79-.74-1.69-1.36-2.67-1.85-.33-.16-.56-.5-.56-.9v-3.1C15.15 9.25 13.6 9 12 9z"
              />
            </svg>
          </button>
        </div>
      </div>
    </div>

    <script src="client.js"></script>
    <!-- <script>
    // Theme toggle functionality
    const themeToggle = document.getElementById('theme-toggle');
    const body = document.body;
    const sunIcon = document.getElementById('theme-icon-sun');
    const moonIcon = document.getElementById('theme-icon-moon');

    // Check for saved theme preference or default to 'light'
    const currentTheme = localStorage.getItem('theme') || 'light';
    body.setAttribute('data-theme', currentTheme);
    updateThemeIcon(currentTheme);

    themeToggle.addEventListener('click', () => {
      const theme = body.getAttribute('data-theme');
      const newTheme = theme === 'light' ? 'dark' : 'light';
      body.setAttribute('data-theme', newTheme);
      localStorage.setItem('theme', newTheme);
      updateThemeIcon(newTheme);
    });

    function updateThemeIcon(theme) {
      if (theme === 'dark') {
        sunIcon.classList.add('hidden');
        moonIcon.classList.remove('hidden');
      } else {
        sunIcon.classList.remove('hidden');
        moonIcon.classList.add('hidden');
      }
    }

    // UI Elements
    const welcomeScreen = document.getElementById('welcome-screen');
    const callScreen = document.getElementById('call-screen');
    const usernameInput = document.getElementById('username-input');
    const roomInput = document.getElementById('room-input');
    const joinRoomBtn = document.getElementById('join-room-btn');
    const createRoomBtn = document.getElementById('create-room-btn');
    const roomCodeDisplay = document.getElementById('room-code-display');
    const roomCode = document.getElementById('room-code');
    const copyRoomBtn = document.getElementById('copy-room-btn');
    const callTypeSelection = document.getElementById('call-type-selection');
    const voiceCallBtn = document.getElementById('voice-call-btn');
    const videoCallBtn = document.getElementById('video-call-btn');
    const moreOptionsBtn = document.getElementById('more-options-btn');
    const statusMessage = document.getElementById('status-message');
    const peerAvatar = document.getElementById('peer-avatar');
    const peerName = document.getElementById('peer-name');
    const callStatus = document.getElementById('call-status');
    const localName = document.getElementById('local-name');
    const localVideo = document.getElementById('local-video');
    const remoteVideo = document.getElementById('remote-video');
    const toggleMicBtn = document.getElementById('toggle-mic-btn');
    const toggleCameraBtn = document.getElementById('toggle-camera-btn');
    const switchCameraBtn = document.getElementById('switch-camera-btn');
    const shareScreenBtn = document.getElementById('share-screen-btn');
    const stopShareScreenBtn = document.getElementById('stop-share-screen-btn');
    const endCallBtn = document.getElementById('end-call-btn');
    const micOnIcon = document.getElementById('mic-on-icon');
    const micOffIcon = document.getElementById('mic-off-icon');
    const cameraOnIcon = document.getElementById('camera-on-icon');
    const cameraOffIcon = document.getElementById('camera-off-icon');

    // State
    let currentRoom = '';
    let currentUsername = '';
    let isMuted = false;
    let isCameraOff = false;
    let isScreenSharing = false;
    let localStream = null;
    let screenStream = null;

    // Create Room
    createRoomBtn.addEventListener('click', () => {
      const username = usernameInput.value.trim();
      if (!username) {
        setStatus('Please enter your name');
        return;
      }
      currentUsername = username;
      currentRoom = generateRoomCode();
      roomCode.textContent = currentRoom;
      roomCodeDisplay.classList.remove('hidden');
      callTypeSelection.classList.remove('hidden');
      setStatus('Room created! Share the code with others');
    });

    // Join Room
    joinRoomBtn.addEventListener('click', () => {
      const username = usernameInput.value.trim();
      const room = roomInput.value.trim();
      if (!username || !room) {
        setStatus('Please enter your name and room code');
        return;
      }
      currentUsername = username;
      currentRoom = room;
      callTypeSelection.classList.remove('hidden');
      setStatus('Ready to join! Select call type');
    });

    // Copy Room Code
    copyRoomBtn.addEventListener('click', async () => {
      try {
        await navigator.clipboard.writeText(currentRoom);
        copyRoomBtn.textContent = 'Copied!';
        copyRoomBtn.classList.add('copied');
        setTimeout(() => {
          copyRoomBtn.textContent = 'Copy';
          copyRoomBtn.classList.remove('copied');
        }, 2000);
      } catch (err) {
        setStatus('Failed to copy room code');
      }
    });

    // Voice Call
    voiceCallBtn.addEventListener('click', async () => {
      await startCall(false);
    });

    // Video Call
    videoCallBtn.addEventListener('click', async () => {
      await startCall(true);
    });

    // More Options (placeholder)
    moreOptionsBtn.addEventListener('click', () => {
      setStatus('More options coming soon!');
    });

    // Start Call
    async function startCall(withVideo) {
      try {
        localStream = await navigator.mediaDevices.getUserMedia({
          audio: true,
          video: withVideo ? { facingMode: 'user' } : false
        });

        localVideo.srcObject = localStream;
        localName.textContent = currentUsername;
        
        // Show call screen
        welcomeScreen.style.display = 'none';
        callScreen.classList.add('active');
        
        // Update UI based on call type
        if (!withVideo) {
          localVideo.style.display = 'none';
          remoteVideo.style.display = 'none';
          toggleCameraBtn.disabled = true;
        } else {
          switchCameraBtn.classList.remove('hidden');
        }

        // Simulate peer connection (replace with actual WebRTC logic)
        setTimeout(() => {
          const peerUsername = 'Peer User';
          peerName.textContent = peerUsername;
          peerAvatar.textContent = peerUsername.charAt(0).toUpperCase();
          callStatus.textContent = 'Connected';
        }, 2000);

      } catch (err) {
        setStatus('Failed to access media devices: ' + err.message);
      }
    }

    // Toggle Microphone
    toggleMicBtn.addEventListener('click', () => {
      if (localStream) {
        const audioTrack = localStream.getAudioTracks()[0];
        if (audioTrack) {
          audioTrack.enabled = !audioTrack.enabled;
          isMuted = !audioTrack.enabled;
          
          if (isMuted) {
            micOnIcon.classList.add('hidden');
            micOffIcon.classList.remove('hidden');
            toggleMicBtn.classList.add('active');
          } else {
            micOnIcon.classList.remove('hidden');
            micOffIcon.classList.add('hidden');
            toggleMicBtn.classList.remove('active');
          }
        }
      }
    });

    // Toggle Camera
    toggleCameraBtn.addEventListener('click', () => {
      if (localStream) {
        const videoTrack = localStream.getVideoTracks()[0];
        if (videoTrack) {
          videoTrack.enabled = !videoTrack.enabled;
          isCameraOff = !videoTrack.enabled;
          
          if (isCameraOff) {
            cameraOnIcon.classList.add('hidden');
            cameraOffIcon.classList.remove('hidden');
            toggleCameraBtn.classList.add('active');
          } else {
            cameraOnIcon.classList.remove('hidden');
            cameraOffIcon.classList.add('hidden');
            toggleCameraBtn.classList.remove('active');
          }
        }
      }
    });

    // Switch Camera
    switchCameraBtn.addEventListener('click', async () => {
      if (localStream) {
        const videoTrack = localStream.getVideoTracks()[0];
        if (videoTrack) {
          const currentFacingMode = videoTrack.getSettings().facingMode;
          const newFacingMode = currentFacingMode === 'user' ? 'environment' : 'user';
          
          try {
            const newStream = await navigator.mediaDevices.getUserMedia({
              audio: true,
              video: { facingMode: newFacingMode }
            });
            
            const newVideoTrack = newStream.getVideoTracks()[0];
            videoTrack.stop();
            localStream.removeTrack(videoTrack);
            localStream.addTrack(newVideoTrack);
            localVideo.srcObject = localStream;
          } catch (err) {
            setStatus('Failed to switch camera');
          }
        }
      }
    });

    // Share Screen
    shareScreenBtn.addEventListener('click', async () => {
      try {
        screenStream = await navigator.mediaDevices.getDisplayMedia({
          video: true
        });
        
        const screenTrack = screenStream.getVideoTracks()[0];
        const videoTrack = localStream.getVideoTracks()[0];
        
        if (videoTrack) {
          localStream.removeTrack(videoTrack);
          videoTrack.stop();
        }
        
        localStream.addTrack(screenTrack);
        localVideo.srcObject = localStream;
        localVideo.classList.remove('camera-feed');
        
        isScreenSharing = true;
        shareScreenBtn.classList.add('hidden');
        stopShareScreenBtn.classList.remove('hidden');
        
        screenTrack.onended = () => {
          stopScreenShare();
        };
      } catch (err) {
        setStatus('Failed to share screen');
      }
    });

    // Stop Screen Share
    stopShareScreenBtn.addEventListener('click', () => {
      stopScreenShare();
    });

    async function stopScreenShare() {
      if (screenStream) {
        screenStream.getTracks().forEach(track => track.stop());
        
        try {
          const newStream = await navigator.mediaDevices.getUserMedia({
            audio: true,
            video: { facingMode: 'user' }
          });
          
          const videoTrack = localStream.getVideoTracks()[0];
          if (videoTrack) {
            localStream.removeTrack(videoTrack);
            videoTrack.stop();
          }
          
          const newVideoTrack = newStream.getVideoTracks()[0];
          localStream.addTrack(newVideoTrack);
          localVideo.srcObject = localStream;
          localVideo.classList.add('camera-feed');
        } catch (err) {
          console.error('Failed to restart camera:', err);
        }
        
        isScreenSharing = false;
        shareScreenBtn.classList.remove('hidden');
        stopShareScreenBtn.classList.add('hidden');
      }
    }

    // End Call
    endCallBtn.addEventListener('click', () => {
      if (localStream) {
        localStream.getTracks().forEach(track => track.stop());
      }
      if (screenStream) {
        screenStream.getTracks().forEach(track => track.stop());
      }
      
      callScreen.classList.remove('active');
      welcomeScreen.style.display = 'block';
      
      // Reset UI
      roomCodeDisplay.classList.add('hidden');
      callTypeSelection.classList.add('hidden');
      roomInput.value = '';
      currentRoom = '';
      setStatus('Call ended');
    });

    // Helper Functions
    function generateRoomCode() {
      return Math.random().toString(36).substring(2, 8).toUpperCase();
    }

    function setStatus(message) {
      statusMessage.textContent = message;
    }
  </script> -->
  </body>
</html>
